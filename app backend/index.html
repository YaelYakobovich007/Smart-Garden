<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Smart Garden - Register Only</title>
</head>
<body>
  <h1>ğŸŒ¿ Smart Garden â€“ Register</h1>

  <h2>ğŸ†• Register</h2>
  <input id="email" type="email" placeholder="Email" />
  <input id="password" type="password" placeholder="Password" />
  <br><br>
  <button onclick="register()">Register</button>

  <hr>

  <pre id="log"></pre>

  <script>
    const socket = new WebSocket('ws://localhost:8080');

    socket.onopen = () => {
      log('âœ… Connected to server');
    };

    socket.onmessage = (event) => {
      const data = JSON.parse(event.data);
      log('ğŸ“© From server:\n' + JSON.stringify(data, null, 2));
    };

    socket.onclose = () => {
      log('âŒ Disconnected from server');
    };

    socket.onerror = (err) => {
      log('ğŸš« Error: ' + err.message);
    };

    function register() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      if (!email || !password) {
        log('âš ï¸ Please enter both email and password.');
        return;
      }

      socket.send(JSON.stringify({
        type: 'REGISTER',
        email,
        password
      }));
      log('ğŸ“¤ Sent register request');
    }

    function log(msg) {
      document.getElementById('log').textContent += msg + '\n';
    }
  </script>
</body>
</html>
